<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Credit Card Points Calculator Pro</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'DM Sans', sans-serif;
      margin: 0;
      padding: 0;
    }
    .hero-title {
      font-family: 'Playfair Display', serif;
      font-weight: 900;
    }
    .card-shadow {
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    }
    .gradient-bg {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    .pulse-shadow {
      animation: pulse-shadow 2s infinite;
    }
    @keyframes pulse-shadow {
      0%, 100% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.4); }
      50% { box-shadow: 0 0 40px rgba(102, 126, 234, 0.6); }
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    // CHANGE THIS PASSWORD MONTHLY (e.g., "feb2025", "mar2025")
    const VALID_PASSWORD = "jan2025";

    const LandingPage = ({ onAccessGranted }) => {
      const [password, setPassword] = useState('');
      const [error, setError] = useState('');

      const handleSubmit = (e) => {
        e.preventDefault();
        if (password.toLowerCase() === VALID_PASSWORD) {
          localStorage.setItem('ccCalcAccess', VALID_PASSWORD);
          localStorage.setItem('ccCalcExpiry', Date.now() + (30 * 24 * 60 * 60 * 1000)); // 30 days
          onAccessGranted();
        } else {
          setError('Invalid access code. Please check your purchase confirmation email.');
        }
      };

      return (
        <div className="min-h-screen gradient-bg flex items-center justify-center p-4">
          <div className="max-w-2xl w-full">
            <div className="bg-white rounded-3xl p-8 md:p-12 card-shadow">
              <div className="text-center mb-8">
                <h1 className="hero-title text-5xl md:text-6xl mb-4 bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent">
                  Credit Card Points Calculator Pro
                </h1>
                <p className="text-gray-600 text-lg">
                  Maximize your credit card rewards with data-driven insights
                </p>
              </div>

              <div className="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-2xl p-6 mb-8">
                <h2 className="font-bold text-xl mb-4 text-gray-800">What You Get:</h2>
                <ul className="space-y-3 text-gray-700">
                  <li className="flex items-start">
                    <span className="text-green-500 mr-3 text-xl">✓</span>
                    <span>Compare 15+ premium credit cards side-by-side</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-green-500 mr-3 text-xl">✓</span>
                    <span>Calculate exact points value based on YOUR spending</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-green-500 mr-3 text-xl">✓</span>
                    <span>Factor in ALL benefits (lounge access, credits, status)</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-green-500 mr-3 text-xl">✓</span>
                    <span>See your net annual value after fees</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-green-500 mr-3 text-xl">✓</span>
                    <span>30-day access to make the best decision</span>
                  </li>
                </ul>
              </div>

              <form onSubmit={handleSubmit} className="space-y-4">
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-2">
                    Enter Your Access Code
                  </label>
                  <input
                    type="text"
                    value={password}
                    onChange={(e) => {
                      setPassword(e.target.value);
                      setError('');
                    }}
                    placeholder="Enter code from purchase email"
                    className="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 focus:outline-none transition-colors"
                  />
                  {error && (
                    <p className="text-red-500 text-sm mt-2">{error}</p>
                  )}
                </div>
                <button
                  type="submit"
                  className="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-4 rounded-lg hover:shadow-xl transition-all duration-300 pulse-shadow"
                >
                  Access Calculator
                </button>
              </form>

              <div className="mt-8 pt-6 border-t border-gray-200 text-center">
                <p className="text-gray-600 mb-3">Don't have access yet?</p>
                <a
                  href="https://whop.com/makingcents/credit-card-points-calculator/"
                  target="_blank"
                  rel="noopener noreferrer"
                  className="inline-block bg-white border-2 border-purple-600 text-purple-600 font-bold px-8 py-3 rounded-lg hover:bg-purple-50 transition-colors"
                >
                  Get Access for $1.99
                </a>
                <p className="text-sm text-gray-500 mt-3">One-time payment • 30-day access</p>
              </div>
            </div>

            <p className="text-white text-center mt-6 text-sm opacity-90">
              Trusted by smart spenders • Make data-driven card decisions
            </p>
          </div>
        </div>
      );
    };

    const CreditCardPointsCalculator = () => {
      const [currentPage, setCurrentPage] = useState('selection');
      const [selectedCards, setSelectedCards] = useState([]);
      const [totalSpending, setTotalSpending] = useState({
        rent: 0, flights: 0, dining: 0, groceries: 0,
        hotels: 0, travel: 0, gas: 0, other: 0
      });

      const allCards = [
        { id: 'Delta Platinum', name: 'Delta Platinum', category: 'Delta' },
        { id: 'Delta Reserve', name: 'Delta Reserve', category: 'Delta' },
        { id: 'United Quest', name: 'United Quest', category: 'United' },
        { id: 'United Club Infinite', name: 'United Club Infinite', category: 'United' },
        { id: 'AA Platinum', name: 'American Airlines Platinum', category: 'American' },
        { id: 'AA Executive', name: 'American Airlines Executive', category: 'American' },
        { id: 'Chase Sapphire Reserve', name: 'Chase Sapphire Reserve', category: 'Chase' },
        { id: 'Chase Sapphire Preferred', name: 'Chase Sapphire Preferred', category: 'Chase' },
        { id: 'Amex Gold', name: 'Amex Gold', category: 'Amex' },
        { id: 'Amex Platinum', name: 'Amex Platinum', category: 'Amex' },
        { id: 'Capital One Venture X', name: 'Capital One Venture X', category: 'Capital One' },
        { id: 'Capital One Venture', name: 'Capital One Venture', category: 'Capital One' },
        { id: 'Bilt Palladium', name: 'Bilt Palladium', category: 'Bilt' },
        { id: 'Bilt Obsidian', name: 'Bilt Obsidian', category: 'Bilt' },
        { id: 'Bilt Blue', name: 'Bilt Blue', category: 'Bilt' }
      ];

      const toggleCard = (cardId) => {
        setSelectedCards(prev => 
          prev.includes(cardId) 
            ? prev.filter(id => id !== cardId)
            : [...prev, cardId]
        );
      };

      const groupedCards = allCards.reduce((acc, card) => {
        if (!acc[card.category]) acc[card.category] = [];
        acc[card.category].push(card);
        return acc;
      }, {});

      if (currentPage === 'selection') {
        return (
          <div className="min-h-screen bg-gradient-to-br from-gray-50 to-purple-50 p-6">
            <div className="w-full max-w-4xl mx-auto">
              <div className="bg-white rounded-2xl shadow-xl p-8">
                <div className="mb-6">
                  <h2 className="hero-title text-4xl mb-2 text-gray-800">Select Credit Cards to Compare</h2>
                  <p className="text-gray-600">Choose the cards you want to evaluate. This will help keep your comparison view clean and focused.</p>
                </div>
                <div className="space-y-6">
                  {Object.entries(groupedCards).map(([category, cards]) => (
                    <div key={category} className="border-b pb-4 last:border-b-0">
                      <h3 className="font-bold text-lg mb-3 text-purple-700">{category} Cards</h3>
                      <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                        {cards.map(card => (
                          <label key={card.id} className="flex items-center gap-2 p-3 hover:bg-purple-50 rounded-lg cursor-pointer transition-colors">
                            <input
                              type="checkbox"
                              checked={selectedCards.includes(card.id)}
                              onChange={() => toggleCard(card.id)}
                              className="w-5 h-5 text-purple-600"
                            />
                            <span className="text-gray-700">{card.name}</span>
                          </label>
                        ))}
                      </div>
                    </div>
                  ))}
                </div>
                <div className="mt-8 flex gap-4 flex-wrap">
                  <button
                    onClick={() => setCurrentPage('spending-input')}
                    disabled={selectedCards.length === 0}
                    className="px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:shadow-lg disabled:bg-gray-300 disabled:cursor-not-allowed transition-all font-semibold"
                  >
                    Continue to Spending Input ({selectedCards.length} cards selected)
                  </button>
                  <button
                    onClick={() => setSelectedCards(allCards.map(c => c.id))}
                    className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors font-semibold"
                  >
                    Select All
                  </button>
                  <button
                    onClick={() => setSelectedCards([])}
                    className="px-6 py-3 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors font-semibold"
                  >
                    Clear All
                  </button>
                </div>
              </div>
            </div>
          </div>
        );
      }

      if (currentPage === 'spending-input') {
        return <SpendingInputView selectedCards={selectedCards} totalSpending={totalSpending} setTotalSpending={setTotalSpending} onBack={() => setCurrentPage('selection')} onContinue={() => setCurrentPage('calculator')} />;
      }

      return <CalculatorView selectedCards={selectedCards} totalSpending={totalSpending} onBack={() => setCurrentPage('spending-input')} />;
    };

    const SpendingInputView = ({ selectedCards, totalSpending, setTotalSpending, onBack, onContinue }) => {
      const updateSpending = (category, value) => {
        setTotalSpending(prev => ({
          ...prev,
          [category]: parseFloat(value) || 0
        }));
      };

      const categories = [
        { key: 'rent', label: 'Rent/Mortgage', description: 'Monthly rent or mortgage payment' },
        { key: 'flights', label: 'Flights', description: 'Airline tickets and flight purchases' },
        { key: 'dining', label: 'Dining', description: 'Restaurants, takeout, delivery' },
        { key: 'groceries', label: 'Groceries', description: 'Supermarkets and grocery stores' },
        { key: 'hotels', label: 'Hotels', description: 'Hotel stays and accommodations' },
        { key: 'travel', label: 'Travel (general)', description: 'Other travel expenses' },
        { key: 'gas', label: 'Gas', description: 'Gas stations and fuel' },
        { key: 'other', label: 'Other', description: 'All other purchases' }
      ];

      const totalMonthlySpend = Object.values(totalSpending).reduce((sum, val) => sum + val, 0);

      return (
        <div className="min-h-screen bg-gradient-to-br from-gray-50 to-purple-50 p-6">
          <div className="w-full max-w-4xl mx-auto">
            <button
              onClick={onBack}
              className="mb-4 px-4 py-2 bg-white rounded-lg shadow hover:shadow-md transition-shadow font-semibold text-purple-600"
            >
              ← Back to Card Selection
            </button>

            <div className="bg-white rounded-2xl shadow-xl p-8">
              <div className="mb-6">
                <h2 className="hero-title text-4xl mb-2 text-gray-800">Enter Your Monthly Spending</h2>
                <p className="text-gray-600">Tell us how much you spend in each category per month. We'll optimize which card to use for each category based on the best returns.</p>
              </div>

              <div className="space-y-4">
                {categories.map(category => (
                  <div key={category.key} className="border-b pb-4 last:border-b-0">
                    <label className="block mb-2">
                      <span className="font-semibold text-gray-800">{category.label}</span>
                      <span className="text-sm text-gray-500 ml-2">({category.description})</span>
                    </label>
                    <div className="flex items-center gap-2">
                      <span className="text-gray-500">$</span>
                      <input
                        type="number"
                        value={totalSpending[category.key]}
                        onChange={(e) => updateSpending(category.key, e.target.value)}
                        className="flex-1 p-3 border-2 border-purple-200 rounded-lg focus:border-purple-500 focus:outline-none"
                        placeholder="0"
                      />
                    </div>
                  </div>
                ))}
              </div>

              <div className="mt-6 p-4 bg-purple-50 rounded-lg">
                <div className="flex justify-between items-center">
                  <span className="font-bold text-lg text-gray-800">Total Monthly Spending:</span>
                  <span className="font-bold text-2xl text-purple-700">${totalMonthlySpend.toLocaleString()}</span>
                </div>
              </div>

              <div className="mt-8 flex gap-4">
                <button
                  onClick={onContinue}
                  className="flex-1 px-6 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:shadow-lg transition-all font-semibold text-lg"
                >
                  Continue to Optimized Strategy →
                </button>
              </div>
            </div>
          </div>
        </div>
      );
    };

    const CalculatorView = ({ selectedCards, totalSpending, onBack }) => {
      const benefitSuggestions = {
        'Delta Platinum': { hotel: 100, restaurant: 100, taxi: 60, streaming: 0, entertainment: 0, lounges: 0, eliteStatus: 150, travelCredit: 0, misc: 140 },
        'Delta Reserve': { hotel: 100, restaurant: 100, taxi: 120, streaming: 0, entertainment: 0, lounges: 800, eliteStatus: 350, travelCredit: 0, misc: 150 },
        'United Quest': { hotel: 0, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 100, eliteStatus: 0, travelCredit: 0, misc: 120 },
        'United Club Infinite': { hotel: 0, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 600, eliteStatus: 0, travelCredit: 0, misc: 120 },
        'AA Platinum': { hotel: 0, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 0, eliteStatus: 0, travelCredit: 0, misc: 170 },
        'AA Executive': { hotel: 0, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 600, eliteStatus: 0, travelCredit: 0, misc: 320 },
        'Chase Sapphire Reserve': { hotel: 100, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 500, eliteStatus: 0, travelCredit: 300, misc: 100 },
        'Chase Sapphire Preferred': { hotel: 50, restaurant: 120, taxi: 0, streaming: 0, entertainment: 0, lounges: 50, eliteStatus: 0, travelCredit: 0, misc: 0 },
        'Amex Gold': { hotel: 0, restaurant: 120, taxi: 120, streaming: 0, entertainment: 0, lounges: 0, eliteStatus: 0, travelCredit: 0, misc: 0 },
        'Amex Platinum': { hotel: 200, restaurant: 0, taxi: 200, streaming: 0, entertainment: 340, lounges: 800, eliteStatus: 150, travelCredit: 200, misc: 20 },
        'Capital One Venture X': { hotel: 0, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 400, eliteStatus: 50, travelCredit: 300, misc: 0 },
        'Capital One Venture': { hotel: 0, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 0, eliteStatus: 0, travelCredit: 0, misc: 20 },
        'Bilt Palladium': { hotel: 150, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 200, eliteStatus: 0, travelCredit: 0, misc: 100 },
        'Bilt Obsidian': { hotel: 50, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 0, eliteStatus: 0, travelCredit: 0, misc: 0 },
        'Bilt Blue': { hotel: 0, restaurant: 0, taxi: 0, streaming: 0, entertainment: 0, lounges: 0, eliteStatus: 0, travelCredit: 0, misc: 0 }
      };

      const initializeBenefitValues = () => {
        const values = {};
        selectedCards.forEach(card => {
          const suggestions = benefitSuggestions[card] || {};
          Object.keys(suggestions).forEach(category => {
            values[`${card}-${category}`] = suggestions[category];
          });
        });
        return values;
      };

      const [benefitValues, setBenefitValues] = useState(initializeBenefitValues());
      const [pointValues, setPointValues] = useState({
        'Delta Platinum': 0.015, 'Delta Reserve': 0.015,
        'United Quest': 0.015, 'United Club Infinite': 0.015,
        'AA Platinum': 0.015, 'AA Executive': 0.015,
        'Chase Sapphire Reserve': 0.020, 'Chase Sapphire Preferred': 0.018,
        'Amex Gold': 0.020, 'Amex Platinum': 0.020,
        'Capital One Venture X': 0.017, 'Capital One Venture': 0.017,
        'Bilt Palladium': 0.022, 'Bilt Obsidian': 0.022, 'Bilt Blue': 0.022
      });

      const initialSpending = {
        rent: 0, flights: 0, dining: 0, groceries: 0,
        hotels: 0, travel: 0, gas: 0, other: 0
      };

      const optimizeSpending = () => {
        const optimized = selectedCards.reduce((acc, card) => ({ ...acc, [card]: { ...initialSpending } }), {});
        
        // For each category, find the card with the highest return
        Object.keys(initialSpending).forEach(category => {
          if (totalSpending[category] > 0) {
            let bestCard = null;
            let bestReturn = -1;
            
            selectedCards.forEach(card => {
              const multiplier = cardRates[card][category];
              const isBiltCard = card.includes('Bilt');
              const isDisabled = category === 'rent' && !isBiltCard;
              
              if (!isDisabled) {
                const returnRate = pointValues[card] * multiplier * 100;
                if (returnRate > bestReturn) {
                  bestReturn = returnRate;
                  bestCard = card;
                }
              }
            });
            
            // Assign the spending to the best card for this category
            if (bestCard) {
              optimized[bestCard][category] = totalSpending[category];
            }
          }
        });
        
        return optimized;
      };

      const [cardSpending, setCardSpending] = useState(optimizeSpending());

      const cardRates = {
        'Delta Platinum': { rent: 1, flights: 3, dining: 2, groceries: 2, hotels: 3, travel: 1, gas: 1, other: 1 },
        'Delta Reserve': { rent: 1, flights: 3, dining: 2, groceries: 2, hotels: 3, travel: 1, gas: 1, other: 1 },
        'United Quest': { rent: 1, flights: 3, dining: 2, groceries: 1, hotels: 1, travel: 1, gas: 1, other: 1 },
        'United Club Infinite': { rent: 1, flights: 4, dining: 2, groceries: 1, hotels: 1, travel: 1, gas: 1, other: 1 },
        'AA Platinum': { rent: 1, flights: 2, dining: 1, groceries: 1, hotels: 1, travel: 1, gas: 1, other: 1 },
        'AA Executive': { rent: 1, flights: 2, dining: 1, groceries: 1, hotels: 1, travel: 1, gas: 1, other: 1 },
        'Chase Sapphire Reserve': { rent: 1, flights: 3, dining: 3, groceries: 1, hotels: 3, travel: 3, gas: 1, other: 1 },
        'Chase Sapphire Preferred': { rent: 1, flights: 2, dining: 3, groceries: 1, hotels: 2, travel: 2, gas: 1, other: 1 },
        'Amex Gold': { rent: 1, flights: 3, dining: 4, groceries: 4, hotels: 1, travel: 1, gas: 1, other: 1 },
        'Amex Platinum': { rent: 1, flights: 5, dining: 1, groceries: 1, hotels: 5, travel: 1, gas: 1, other: 1 },
        'Capital One Venture X': { rent: 1, flights: 5, dining: 2, groceries: 1, hotels: 5, travel: 2, gas: 1, other: 1 },
        'Capital One Venture': { rent: 1, flights: 2, dining: 1, groceries: 1, hotels: 2, travel: 1, gas: 1, other: 1 },
        'Bilt Palladium': { rent: 3, flights: 2, dining: 3, groceries: 1, hotels: 2, travel: 2, gas: 1, other: 1 },
        'Bilt Obsidian': { rent: 2, flights: 2, dining: 3, groceries: 1, hotels: 2, travel: 2, gas: 1, other: 1 },
        'Bilt Blue': { rent: 1, flights: 2, dining: 3, groceries: 1, hotels: 2, travel: 2, gas: 1, other: 1 }
      };

      const updateCardSpending = (card, category, value) => {
        setCardSpending(prev => ({
          ...prev,
          [card]: { ...prev[card], [category]: parseFloat(value) || 0 }
        }));
      };

      const updateBenefit = (card, category, value) => {
        setBenefitValues(prev => ({
          ...prev,
          [`${card}-${category}`]: parseFloat(value) || 0
        }));
      };

      const calculateResults = () => {
        const results = {};
        selectedCards.forEach(card => {
          const spending = cardSpending[card];
          const rates = cardRates[card];
          let totalPoints = 0;
          Object.keys(spending).forEach(category => {
            totalPoints += spending[category] * (rates[category] || 1);
          });
          results[card] = { points: totalPoints };
        });
        return results;
      };

      const calculateTotalBenefits = (card) => {
        let total = 0;
        ['hotel', 'restaurant', 'taxi', 'streaming', 'entertainment', 'lounges', 'eliteStatus', 'travelCredit', 'misc'].forEach(category => {
          total += benefitValues[`${card}-${category}`] || 0;
        });
        return total;
      };

      const results = calculateResults();

      return (
        <div className="min-h-screen bg-gradient-to-br from-gray-50 to-purple-50 p-6 space-y-6">
          <div className="max-w-7xl mx-auto">
            <button
              onClick={onBack}
              className="mb-4 px-4 py-2 bg-white rounded-lg shadow hover:shadow-md transition-shadow font-semibold text-purple-600"
            >
              ← Back to Card Selection
            </button>

            <div className="bg-white rounded-2xl shadow-xl p-8">
              <div className="mb-6">
                <h2 className="hero-title text-3xl mb-2 text-gray-800">Point Values</h2>
                <div className="text-sm text-gray-600 space-y-2">
                  <p><strong>How to use this section:</strong></p>
                  <ul className="list-disc ml-6 space-y-1">
                    <li>Each card's points have a <strong>recommended cash value</strong> based on typical redemption rates</li>
                    <li><strong>Adjust these values</strong> if you know you get better or worse value from your redemptions</li>
                    <li>Examples: Transfer partners may yield 0.02-0.03, while statement credits are often just 0.01</li>
                    <li>These values directly affect your return percentages in the spending table below</li>
                  </ul>
                </div>
              </div>
              <div className="overflow-x-auto">
                <table className="w-full text-sm border-collapse">
                  <thead>
                    <tr className="border-b-2">
                      <th className="text-left p-2 font-bold">Credit Card</th>
                      <th className="text-center p-2 font-bold">Point Value (cents per point)</th>
                    </tr>
                  </thead>
                  <tbody>
                    {selectedCards.map(card => (
                      <tr key={card} className="border-b hover:bg-purple-50">
                        <td className="p-2 font-semibold">{card}</td>
                        <td className="p-2">
                          <div className="flex justify-center items-center gap-2">
                            <input
                              type="number"
                              step="0.001"
                              value={pointValues[card]}
                              onChange={(e) => setPointValues(prev => ({
                                ...prev,
                                [card]: parseFloat(e.target.value) || 0
                              }))}
                              className="w-24 p-2 border-2 border-purple-200 rounded-lg text-center focus:border-purple-500 focus:outline-none"
                            />
                            <span className="text-gray-500">¢</span>
                          </div>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>

            <div className="bg-white rounded-2xl shadow-xl p-8">
              <div className="mb-6">
                <h2 className="hero-title text-3xl mb-2 text-gray-800">Monthly Spending by Category</h2>
                <p className="text-gray-600">Enter your monthly spending for each card. Only fill in categories you'd use that specific card for.</p>
              </div>
              <div className="overflow-x-auto">
                <table className="w-full text-sm border-collapse">
                  <thead>
                    <tr className="border-b-2">
                      <th className="text-left p-2 sticky left-0 bg-white z-10 font-bold">Spending Category</th>
                      {selectedCards.map(card => (
                        <th key={card} className="text-center p-2 min-w-[140px] font-bold text-purple-700">{card}</th>
                      ))}
                    </tr>
                  </thead>
                  <tbody>
                    {(() => {
                      // Calculate the absolute maximum return across all cards and categories
                      const globalMaxReturn = Math.max(...[
                        { key: 'rent', label: 'Rent' },
                        { key: 'flights', label: 'Flights' },
                        { key: 'dining', label: 'Dining' },
                        { key: 'groceries', label: 'Groceries' },
                        { key: 'hotels', label: 'Hotels' },
                        { key: 'travel', label: 'Travel (general)' },
                        { key: 'gas', label: 'Gas' },
                        { key: 'other', label: 'Other' }
                      ].flatMap(category => 
                        selectedCards.map(card => {
                          const multiplier = cardRates[card][category.key];
                          const isBiltCard = card.includes('Bilt');
                          const isDisabled = category.key === 'rent' && !isBiltCard;
                          return isDisabled ? 0 : pointValues[card] * multiplier * 100;
                        })
                      ));
                      
                      return [
                        { key: 'rent', label: 'Rent' },
                        { key: 'flights', label: 'Flights' },
                        { key: 'dining', label: 'Dining' },
                        { key: 'groceries', label: 'Groceries' },
                        { key: 'hotels', label: 'Hotels' },
                        { key: 'travel', label: 'Travel (general)' },
                        { key: 'gas', label: 'Gas' },
                        { key: 'other', label: 'Other' }
                      ].map(category => {
                        // Calculate max return for this category across all cards
                        const maxReturn = Math.max(...selectedCards.map(card => {
                          const multiplier = cardRates[card][category.key];
                          return pointValues[card] * multiplier * 100;
                        }));
                        
                        return (
                          <tr key={category.key} className="border-b hover:bg-purple-50">
                            <td className="p-2 font-semibold sticky left-0 bg-white">{category.label}</td>
                            {selectedCards.map(card => {
                              const multiplier = cardRates[card][category.key];
                              const spending = cardSpending[card][category.key];
                              const points = spending * multiplier;
                              const cashValue = points * pointValues[card];
                              const totalReturn = pointValues[card] * multiplier * 100;
                              // Only disable rent category for non-Bilt cards
                              const isBiltCard = card.includes('Bilt');
                              const isDisabled = category.key === 'rent' && !isBiltCard;
                              // Check if this is the highest return for this category
                              const isHighestReturn = totalReturn === maxReturn && !isDisabled;
                              // Check if this is the absolute highest return across everything
                              const isGlobalMax = totalReturn === globalMaxReturn && !isDisabled;
                              
                              return (
                                <td key={`${card}-${category.key}`} className="p-2">
                                  <div className="flex flex-col gap-1">
                                    <div className={`text-xs text-center font-semibold ${isDisabled ? 'text-gray-400' : isGlobalMax ? 'text-yellow-700 bg-yellow-100 rounded px-1 py-0.5 ring-2 ring-yellow-400' : isHighestReturn ? 'text-green-600 bg-green-50 rounded px-1 py-0.5' : 'text-purple-600'}`}>
                                      {multiplier}x ({totalReturn.toFixed(1)}%)
                                    </div>
                                    <input
                                      type="number"
                                      value={cardSpending[card][category.key]}
                                      onChange={(e) => updateCardSpending(card, category.key, e.target.value)}
                                      disabled={isDisabled}
                                      className={`w-full p-2 border-2 rounded-lg text-center ${isDisabled ? 'bg-gray-100 cursor-not-allowed border-gray-200' : isGlobalMax ? 'border-yellow-400 focus:border-yellow-500 focus:outline-none bg-yellow-50' : isHighestReturn ? 'border-green-400 focus:border-green-500 focus:outline-none' : 'border-purple-200 focus:border-purple-500 focus:outline-none'}`}
                                      placeholder="$0"
                                    />
                                  </div>
                                </td>
                              );
                            })}
                          </tr>
                        );
                      });
                    })()}
                  </tbody>
                </table>
              </div>
            </div>

            <div className="bg-white rounded-2xl shadow-xl p-8">
              <div className="mb-6">
                <h2 className="hero-title text-3xl mb-2 text-gray-800">Annual Value of Other Benefits</h2>
                <div className="text-sm text-gray-600 space-y-2">
                  <p><strong>How to use this table:</strong></p>
                  <ul className="list-disc ml-6 space-y-1">
                    <li>Each cell has a <strong>suggested value</strong> pre-filled based on typical usage</li>
                    <li><strong>Adjust these values</strong> based on how much YOU actually use each benefit</li>
                    <li>Set to $0 if you don't use a particular benefit</li>
                    <li>Examples: Hotel credits (FHR, THC), Restaurant credits (Resy, Uber Eats), Lounges (Priority Pass, Sky Club)</li>
                  </ul>
                </div>
              </div>
              <div className="overflow-x-auto">
                <table className="w-full text-sm border-collapse">
                  <thead>
                    <tr className="border-b-2">
                      <th className="text-left p-2 sticky left-0 bg-white z-10 font-bold">Benefit Category</th>
                      {selectedCards.map(card => (
                        <th key={card} className="text-center p-2 min-w-[120px] font-bold text-purple-700">{card}</th>
                      ))}
                    </tr>
                  </thead>
                  <tbody>
                    {[
                      { key: 'hotel', label: 'Hotel Credits' },
                      { key: 'restaurant', label: 'Restaurant Credits' },
                      { key: 'taxi', label: 'Taxi/Rideshare' },
                      { key: 'streaming', label: 'Streaming Services' },
                      { key: 'entertainment', label: 'Entertainment' },
                      { key: 'lounges', label: 'Lounge Access' },
                      { key: 'eliteStatus', label: 'Elite Status' },
                      { key: 'travelCredit', label: 'Travel Credit' },
                      { key: 'misc', label: 'Misc Benefits' }
                    ].map(category => (
                      <tr key={category.key} className="border-b hover:bg-purple-50">
                        <td className="p-2 font-semibold sticky left-0 bg-white">{category.label}</td>
                        {selectedCards.map(card => {
                          const suggested = benefitSuggestions[card]?.[category.key] || 0;
                          return (
                            <td key={`${card}-${category.key}`} className="p-2">
                              <div className="flex flex-col gap-1">
                                <div className="text-xs text-center text-gray-500">
                                  (suggested: ${suggested})
                                </div>
                                <input
                                  type="number"
                                  value={benefitValues[`${card}-${category.key}`] || 0}
                                  onChange={(e) => updateBenefit(card, category.key, e.target.value)}
                                  className="w-full p-2 border-2 border-purple-200 rounded-lg text-center focus:border-purple-500 focus:outline-none"
                                  placeholder={`$${suggested}`}
                                />
                              </div>
                            </td>
                          );
                        })}
                      </tr>
                    ))}
                    <tr className="border-t-2 bg-purple-50 font-bold">
                      <td className="p-2 sticky left-0 bg-purple-50">Total Benefits Value</td>
                      {selectedCards.map(card => (
                        <td key={card} className="p-2 text-center text-purple-700">
                          ${calculateTotalBenefits(card).toFixed(0)}
                        </td>
                      ))}
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div className="bg-white rounded-2xl shadow-xl p-8">
              <div className="mb-6">
                <h2 className="hero-title text-3xl mb-2 text-gray-800">Annual Value Comparison</h2>
              </div>
              <div className="overflow-x-auto">
                <table className="w-full text-sm">
                  <thead>
                    <tr className="border-b-2">
                      <th className="text-left p-2 font-bold">Card</th>
                      <th className="text-right p-2 font-bold">Annual Points</th>
                      <th className="text-right p-2 font-bold">Points Value</th>
                      <th className="text-right p-2 font-bold">Benefits Value</th>
                      <th className="text-right p-2 font-bold">Total Value</th>
                      <th className="text-right p-2 font-bold">Annual Fee</th>
                      <th className="text-right p-2 font-bold text-lg text-purple-700">Net Value</th>
                    </tr>
                  </thead>
                  <tbody>
                    {selectedCards.map(card => {
                      const annualFees = {
                        'Delta Platinum': 350, 'Delta Reserve': 650,
                        'United Quest': 250, 'United Club Infinite': 525,
                        'AA Platinum': 99, 'AA Executive': 450,
                        'Chase Sapphire Reserve': 550, 'Chase Sapphire Preferred': 95,
                        'Amex Gold': 325, 'Amex Platinum': 695,
                        'Capital One Venture X': 395, 'Capital One Venture': 95,
                        'Bilt Palladium': 495, 'Bilt Obsidian': 95, 'Bilt Blue': 0
                      };
                      const annualPoints = results[card].points * 12;
                      const pointsValue = annualPoints * pointValues[card];
                      const benefitsValue = calculateTotalBenefits(card);
                      const totalValue = pointsValue + benefitsValue;
                      const annualFee = annualFees[card];
                      const netValue = totalValue - annualFee;

                      return (
                        <tr key={card} className="border-b hover:bg-purple-50">
                          <td className="p-2 font-semibold">{card}</td>
                          <td className="text-right p-2">{annualPoints.toLocaleString()}</td>
                          <td className="text-right p-2">${pointsValue.toFixed(0)}</td>
                          <td className="text-right p-2">${benefitsValue.toFixed(0)}</td>
                          <td className="text-right p-2">${totalValue.toFixed(0)}</td>
                          <td className="text-right p-2">${annualFee}</td>
                          <td className="text-right p-2 font-bold text-lg text-purple-700">${netValue.toFixed(0)}</td>
                        </tr>
                      );
                    })}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      );
    };

    const App = () => {
      const [hasAccess, setHasAccess] = useState(false);

      useEffect(() => {
        const savedPassword = localStorage.getItem('ccCalcAccess');
        const expiry = localStorage.getItem('ccCalcExpiry');
        
        if (savedPassword === VALID_PASSWORD && expiry && Date.now() < parseInt(expiry)) {
          setHasAccess(true);
        }
      }, []);

      if (!hasAccess) {
        return <LandingPage onAccessGranted={() => setHasAccess(true)} />;
      }

      return <CreditCardPointsCalculator />;
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
